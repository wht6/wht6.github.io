<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  
  
  <title>Shell脚本复习 | WHT</title>
  
  <meta name="author" content="王贺天" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="Shell" />
  
  <meta name="description" content="基础复习代码规范 脚本第一行  123456#!&#x2F;usr&#x2F;bin&#x2F;env bash # 通过&#x2F;usr&#x2F;bin&#x2F;env运行程序，用户不需要去寻找程序在系统中的位置,，只要程序在你的$PATH中；#!&#x2F;usr&#x2F;bin&#x2F;bash# 指定程序在系统中的具体位置的方式usr&#x2F;bin&#x2F;bash，在某些情况下更安全，因为它限制了代码注入的可能；#!&#x2F;bin&#x2F;bash# 在一些系统上&#x2F;usr&#x2F;bin&#x2F;bash可能">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell脚本复习">
<meta property="og:url" content="http://wht6.github.io/posts/a2bb.html">
<meta property="og:site_name" content="WHT">
<meta property="og:description" content="基础复习代码规范 脚本第一行  123456#!&#x2F;usr&#x2F;bin&#x2F;env bash # 通过&#x2F;usr&#x2F;bin&#x2F;env运行程序，用户不需要去寻找程序在系统中的位置,，只要程序在你的$PATH中；#!&#x2F;usr&#x2F;bin&#x2F;bash# 指定程序在系统中的具体位置的方式usr&#x2F;bin&#x2F;bash，在某些情况下更安全，因为它限制了代码注入的可能；#!&#x2F;bin&#x2F;bash# 在一些系统上&#x2F;usr&#x2F;bin&#x2F;bash可能">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/wht6/image/master/img/sed_2022325.png">
<meta property="article:published_time" content="2022-03-23T08:00:00.000Z">
<meta property="article:modified_time" content="2022-08-09T04:47:35.188Z">
<meta property="article:author" content="王贺天">
<meta property="article:tag" content="Shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wht6/image/master/img/sed_2022325.png">
  <link rel="alternate" href="atom.xml" type="application/atom+xml">
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
    
  </style>
  
<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }
    
    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }
    
   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}
    
    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}
    
   
    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li>
                                            
                                                <a href="/">
                                            
                                                
                                                    <i class="fa fa-home"></i>
                                                
                                                首页
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/archives/">
                                            
                                                
                                                    <i class="fa fa-file"></i>
                                                
                                                档案馆
                                            </a>
                                            
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">WHT</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>WHT</h2> <br />
                        <span>Be Water My Friend</span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="http://wht6.github.io/posts/a2bb.html">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">Shell脚本复习</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2022-03-23T08:00:00.000Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2022-03-23</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> 作者 <span itemprop="name">王贺天</span>
                </li>
                
                    <li>
                        <i class="fa fa-edit"></i> 
                        
                        
                            ~23.02K
                        
                        字
                    </li>
                
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1660020455188"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
            
            
            <hr />
            <div itemprop="articleBody"><h3 id="基础复习"><a href="#基础复习" class="headerlink" title="基础复习"></a>基础复习</h3><h4 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h4><ul>
<li>脚本第一行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash </span></span><br><span class="line"><span class="comment"># 通过/usr/bin/env运行程序，用户不需要去寻找程序在系统中的位置,，只要程序在你的$PATH中；</span></span><br><span class="line"><span class="meta">#!/usr/bin/bash</span></span><br><span class="line"><span class="comment"># 指定程序在系统中的具体位置的方式usr/bin/bash，在某些情况下更安全，因为它限制了代码注入的可能；</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 在一些系统上/usr/bin/bash可能没有，而/bin/bash则一定存在的，所以/bin/bash是显示指定的优先选择。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>基本信息描述</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Author：作者</span></span><br><span class="line"><span class="comment"># Desc：描述</span></span><br><span class="line"><span class="comment"># Usage：用法</span></span><br><span class="line"><span class="comment"># Update：更新时间</span></span><br><span class="line"><span class="comment"># Release：发布版本</span></span><br></pre></td></tr></table></figure>
<h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><p>Bash中基本数据类型只有字符串类型，连数值类型都没有(declare -i可强制声明数值类型)。</p>
<h4 id="变量赋值和引用变量"><a href="#变量赋值和引用变量" class="headerlink" title="变量赋值和引用变量"></a>变量赋值和引用变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=3</span><br><span class="line">echo $a</span><br><span class="line"></span><br><span class="line">a=&#x27;hello world&#x27;</span><br><span class="line">echo $a</span><br></pre></td></tr></table></figure>
<h4 id="变量替换和命令替换"><a href="#变量替换和命令替换" class="headerlink" title="变量替换和命令替换"></a>变量替换和命令替换</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=&quot;hello&quot;</span><br><span class="line">echo $a world</span><br></pre></td></tr></table></figure>
<p>取得变量a的值hello，并将它替换到命令行的<code>$a</code>处.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo `id root`</span><br><span class="line">echo $(id root)</span><br><span class="line">rm -rf $(ls)</span><br></pre></td></tr></table></figure>
<p><strong>命令的输出结果替换到$()或反引号位置处</strong>。</p>
<h4 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h4><p><code>$[]</code>或<code>$(())</code>或<code>let</code>命令可以做简单的整数算术运算。</p>
<p>let是单独的命令，不能写在其它命令行中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=3</span><br><span class="line">let a=a+1</span><br><span class="line">echo $a</span><br></pre></td></tr></table></figure>
<p><code>$[]</code>和<code>$(())</code>可以写在命令行内部，Shell在解析命令行的时候，会对它们做算术运算，然后将运算结果替换到命令行中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a=33</span><br><span class="line">echo $[a+3]</span><br><span class="line">echo $((a+3))</span><br><span class="line"></span><br><span class="line">a=333</span><br><span class="line">echo $[$a+3]</span><br><span class="line">echo $(($a+3))</span><br></pre></td></tr></table></figure>
<p>如果要进行小数运算需要借助计算工具bc或者利用awk来计算。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=1.1</span><br><span class="line">b=1.2</span><br><span class="line">c=`echo &quot;scale=3;$a + $b&quot;|bc` </span><br></pre></td></tr></table></figure>
<h4 id="退出状态码"><a href="#退出状态码" class="headerlink" title="退出状态码"></a>退出状态码</h4><p>每个命令执行后都会有对应的进程退出状态码，用来表示该进程是否是正常退出。</p>
<p>所以，在命令行中，在Shell脚本中，经常会使用特殊变量$?判断最近一个前台命令是否正常退出。</p>
<p>通常情况下，如果<code>$?</code>的值：</p>
<ul>
<li>为0，表示进程成功执行，即正常退出</li>
<li>非0，表示进程未成功执行，即非正常退出</li>
<li>但非0退出状态码并不一定表示错误，也可能是正常逻辑的退出</li>
</ul>
<p>另外，在Shell脚本中，所有条件判断(比如if语句、while语句)都以0退出状态码表示True，以非0退出状态码为False。</p>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>在Linux系统中，每个程序默认都会打开三个文件描述符(file descriptor,fd)：</p>
<ul>
<li>fd=0：标准输入，表示程序默认从哪里读取数据</li>
<li>fd=1：标准输出，表示程序默认将数据输出到哪里</li>
<li>fd=2：标准错误，表示程序默认将错误信息输出到哪里</li>
</ul>
<p>文件描述符，说白了就是系统为了跟踪打开的文件而分配给它的一个数字，这个数字和文件有对应关系：从文件描述符读取数据，即表示从对应的文件中读取数据，向文件描述符写数据，即表示向对应文件中写入数据。</p>
<p>Linux中万物皆文件，文件描述符也是文件。默认：</p>
<ul>
<li>fd=0的标准输入是/dev/stdin文件</li>
<li>fd=1的标准输出是/dev/stdout文件</li>
<li>fd=2的标准错误是/dev/stderr文件</li>
</ul>
<p>这些文件默认又是各个终端的软链接文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -l /dev/std*</span></span><br><span class="line">lrwxrwxrwx 1 root root 15 Jan  8 20:26 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line">lrwxrwxrwx 1 root root 15 Jan  8 20:26 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line">lrwxrwxrwx 1 root root 15 Jan  8 20:26 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -l /proc/self/fd/</span></span><br><span class="line">lrwx------ 1 root root 64 Jan 16 10:40 0 -&gt; /dev/pts/0</span><br><span class="line">lrwx------ 1 root root 64 Jan 16 10:40 1 -&gt; /dev/pts/0</span><br><span class="line">lrwx------ 1 root root 64 Jan 16 10:40 2 -&gt; /dev/pts/0</span><br><span class="line">lr-x------ 1 root root 64 Jan 16 10:40 3 -&gt; /proc/75220/fd</span><br></pre></td></tr></table></figure>
<p>所以，默认情况下读写数据都是终端。</p>
<p>改变文件描述符对应的目标，可以改变数据的流向。比如标准输出fd=1默认流向是终端设备，若将其改为/tmp/a.log，便能让数据写入/tmp/a.log文件中而不再是终端设备中。</p>
<p>在Shell中，这种改变文件描述符目标的行为称为重定向，即重新确定数据的流向。</p>
<p>其实，文件描述符有很多类操作，包括fd的重定向、fd的分配(open，即打开文件)、fd复制(duplicate)、fd的移动(move)、fd的关闭(close)。现在只介绍基础重定向操作。</p>
<p>Shell中，基础重定向操作有以下几种方式：</p>
<ul>
<li><p><code>[n]&gt;file</code>：覆盖式输出重定向，输出到fd=n的数据改变流向输出到file文件中，file不存在则创建，file存在则先清空再写入数据</p>
<ul>
<li>省略n时<code>&gt;file</code>，等价于<code>1&gt;file</code>，即标准输出覆盖重定向到file文件中</li>
</ul>
</li>
<li><p><code>[n]&gt;&gt;file</code>：追加式输出重定向，输出到fd=n的数据改变流向输出到file文件的尾部，file不存在则创建，file存在则直接追加在文件尾部</p>
<ul>
<li>省略n时<code>&gt;&gt;file</code>，等价于<code>1&gt;&gt;file</code>，即标准输出追加重定向到file文件中</li>
</ul>
</li>
<li><p><code>[n]&lt;file</code>：输入重定向，以读取模式打开file文件并分配fd=n，file不存在则报错</p>
</li>
<li>省略n时<code>&lt;file</code>，等价于<code>0&lt;file</code>，即直接从file中读数据</li>
<li>通常程序都只从fd=0中读数据，所以当n不等于0时，需要多做一步操作3&lt;file &lt;&amp;3</li>
<li><code>&amp;&gt;file</code>：这是特殊的重定向方式，表示将标准错误和标准输出都重定向到file文件中，等价于<code>&gt;file 2&gt;&amp;1</code></li>
<li><code>&amp;&gt;&gt;file</code>：这是特殊的重定向方式，表示将标准错误和标准输出都追加到file文件中，等价于<code>&gt;&gt;file 2&gt;&amp;1</code><br>另外，经常用于输出的一个特殊目标文件是<code>/dev/null</code>，它是空设备，可以直接丢掉所有写入它的数据。</li>
</ul>
<p>一个经常用的技巧是清空文件的方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /dev/null &gt;file</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> &gt;file</span></span><br></pre></td></tr></table></figure>
<h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a><code>cat</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n /etc/fstab</span><br></pre></td></tr></table></figure>
<p>cat命令开始执行后，会识别-n选项，该选项会让cat输出时同时输出行号，cat同时还会识别/etc/fstab参数，cat会读取参数指定的文件然后输出。</p>
<p>如果没有指定cat的文件参数，则cat默认会从标准输入中读取数据。默认的标准输入是终端，所以在没有改变标准输入的流向时，会从终端读取数据，也就是用户输入什么字符，就读取什么字符，然后输出什么字符：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat</span></span><br><span class="line">hello   # 在终端输入</span><br><span class="line">hello   # 在终端输出</span><br><span class="line">world   # 在终端输入</span><br><span class="line">world   # 在终端输出</span><br><span class="line">^C</span><br></pre></td></tr></table></figure>
<p>但用户可以改变标准输入的来源。比如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat &lt;/etc/fstab</span></span><br></pre></td></tr></table></figure>
<p>表示将标准输入来源改为/etc/fstab文件，于是cat会从/etc/fstab中读取数据。</p>
<p>cat与重定向结合使用可以将将stdin标准输入的内容重定向到指定的文件(若文件不存在，则创建)，且当stdin中含有EOF时完成写入。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; cattest.txt</span><br><span class="line">hello</span><br><span class="line">EOF</span><br><span class="line"><span class="meta">#</span><span class="bash"> 等价于</span></span><br><span class="line">cat &gt; cattest.txt &lt;&lt; EOF</span><br><span class="line">hello</span><br><span class="line">EOF</span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可以使用追加</span></span><br><span class="line">cat &gt;&gt; cattest.txt &lt;&lt;EOF</span><br><span class="line">world</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="read命令"><a href="#read命令" class="headerlink" title="read命令"></a>read命令</h4><p>read命令是bash内置命令，用来从标准输入中读取数据。比如可以交互式读取用户在终端的输入，读取管道数据，读取标准输入重定向数据，等等。</p>
<p>读取文件中数据的方式：</p>
<ul>
<li>按字符数读取</li>
<li>按分隔符读取</li>
<li>按行读取</li>
<li>一次性读完所有数据</li>
<li>按字节数读取(read命令不支持)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">read [-a aname] [-d delim] [-n nchars]</span><br><span class="line">    [-N nchars] [-p prompt] [-t timeout] [-u fd] [name …]</span><br><span class="line"></span><br><span class="line">-a arr</span><br><span class="line">读取数据保存到数组arr中，arr数组已存在则先清空</span><br><span class="line"></span><br><span class="line">-d delim</span><br><span class="line">指定读取数据时的分隔符，不指定时默认为换行符。当指定为空字符串时，则默认为\0。当指定为文件中不存在的符号，则直接读整个文件</span><br><span class="line"></span><br><span class="line">-n X</span><br><span class="line">每次读取X个字符，但如果读满X字符前遇到了分隔符，则也停止本次读取</span><br><span class="line"></span><br><span class="line">-N X</span><br><span class="line">每次读取X个字符，即使遇到了分隔符也不停止</span><br><span class="line"></span><br><span class="line">-p prompt</span><br><span class="line">交互式提示用户在终端输入的信息，默认不输出换行符</span><br><span class="line"></span><br><span class="line">-s</span><br><span class="line">用户在终端中的输入不会显示出来。在提示用户输入密码时应设置该选项</span><br><span class="line"></span><br><span class="line">-r</span><br><span class="line">使得读取到的反斜线不进行转义，而是作为一个普通反斜线字符 </span><br><span class="line"></span><br><span class="line">-t timeout</span><br><span class="line">超时时间，如果在超时时间内还未读满数据，则读取失败，可指定为小数时间</span><br><span class="line"></span><br><span class="line">-u fd</span><br><span class="line">从文件描述符中读取数据</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line">read -p &quot;Login: &quot; acc</span><br><span class="line"></span><br><span class="line">echo -n -e &quot;Password： &quot;</span><br><span class="line">read -s -t50 -n6 pw</span><br><span class="line">echo</span><br><span class="line"></span><br><span class="line">echo &quot;account: $acc    password: $pw   &quot;</span><br></pre></td></tr></table></figure>
<p>注意：如果没有提供变量名，那么读取的数据将存放到环境变量 REPLY 中。</p>
<h4 id="变量分类"><a href="#变量分类" class="headerlink" title="变量分类"></a>变量分类</h4><ul>
<li>本地变量：用户私有变量，只有本用户可以使用，保存在家目录的<code>.bash_profile</code>、<code>.bashrc</code>文件中。</li>
<li>全局变量：所有用户都可以使用，保存在<code>/etc/profile</code>、<code>/etc/bashrc</code>文件中。定义全局变量加<code>export</code>。</li>
<li>用户自定义变量：用户自定义，比如脚本中的变量。</li>
</ul>
<h4 id="普通数组"><a href="#普通数组" class="headerlink" title="普通数组"></a>普通数组</h4><p>普通数组：只能使用整数作为数组索引(元素的索引)<br>定义方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数组名称=(元素1 元素2 元素3 ...)</span><br></pre></td></tr></table></figure>
<p>读出方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">&#123;数组名[索引]&#125;</span></span><br></pre></td></tr></table></figure>
<p>赋值方式：</p>
<ul>
<li>一次赋一个值</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名=变量值</span><br><span class="line">array[0]=v1</span><br><span class="line">array[1]=v2</span><br><span class="line">array[3]=v3</span><br></pre></td></tr></table></figure>
<ul>
<li>一次附多个值</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array=(var1 var2 var3 var4)</span><br><span class="line">array1=(`cat /etc/passwd`)			# 将文件中每一行赋值给array1数组</span><br><span class="line">array2=(`ls /root`)</span><br><span class="line">array3=(harry amy jack &quot;Miss zhang&quot;)</span><br><span class="line">array4=(1 2 3 4 &quot;hello world&quot; [10]=linux)</span><br></pre></td></tr></table></figure>
<h4 id="访问数组元素"><a href="#访问数组元素" class="headerlink" title="访问数组元素"></a>访问数组元素</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">&#123;array[i]&#125;  i表示元素的索引</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用@ 或 * 可以获取数组中的所有元素：</span></span><br><span class="line"></span><br><span class="line">echo $&#123;array[*]&#125;		#	获取数组里的所有元素</span><br><span class="line">echo $&#123;#array[*]&#125;		#	获取数组里所有元素个数</span><br><span class="line">echo $&#123;!array[@]&#125;    	# 获取数组元素的索引索引</span><br><span class="line">echo $&#123;array[@]:1:2&#125;    # 访问指定的元素；1代表从索引为1的元素开始获取；2代表获取后面几个元素</span><br></pre></td></tr></table></figure>
<h4 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h4><p>关联数组使用首先需要申明该数组为关联数组，声明方式： declare -A 数组名称</p>
<p>赋值方式：</p>
<ul>
<li>声明关联数组</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">declare</span> -A asso_array1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>一次赋一个值</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">asso_array1[linux]=one</span><br><span class="line">asso_array1[java]=two</span><br></pre></td></tr></table></figure>
<ul>
<li>一次附多个值</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare -A  asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]=&quot;Miss zhang&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="bash-debug"><a href="#bash-debug" class="headerlink" title="bash debug"></a>bash debug</h4><ul>
<li>使用bash的-x选项</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bash -x example_script.sh</span></span><br></pre></td></tr></table></figure>
<p>调试部份的脚本，调用<code>set -x</code>，结束的时候调用<code>set +x</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo &quot;Hello $USER,&quot;</span><br><span class="line">set -x</span><br><span class="line">echo &quot;Today is $(date %Y-%m-%d)&quot;</span><br><span class="line">set +x</span><br></pre></td></tr></table></figure>
<h4 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h4><ul>
<li>文件存在与否</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-e	是否存在   不管是文件还是目录，只要存在，条件就成立</span><br><span class="line">-f	是否为普通文件</span><br><span class="line">-d	是否为目录</span><br><span class="line">-S	socket</span><br><span class="line">-p	pipe</span><br><span class="line">-c	character</span><br><span class="line">-b	block</span><br><span class="line">-L	软link</span><br></pre></td></tr></table></figure>
<p>例子：(创建文件夹)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if [ ! -d /tmp/abc ]</span><br><span class="line">	then </span><br><span class="line">		mkdir -v /tmp/abc</span><br><span class="line">		echo &quot;123&quot;</span><br><span class="line">		echo &quot;create /tmp/abc ok &quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<ul>
<li>文件权限</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-r	当前用户对其是否可读</span><br><span class="line">-w	当前用户对其是否可写</span><br><span class="line">-x	当前用户对其是否可执行</span><br><span class="line">-u	是否有suid</span><br><span class="line">-g	是否sgid</span><br><span class="line">-k	是否有t位</span><br></pre></td></tr></table></figure>
<ul>
<li>两个文件比较</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file1 -nt  file2	比较file1是否比file2新	</span><br><span class="line">file1 -ot  file2 	比较file1是否比file2旧</span><br><span class="line">file1 -ef  file2	比较是否为同一个文件，或者用于判断硬连接，是否指向同一个inode</span><br></pre></td></tr></table></figure>
<ul>
<li>字符串比较</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-z  是否为空字符串   		字符串长度为0，就成立</span><br><span class="line">-n  是否为非空字符串    	只要字符串非空，就是成立</span><br><span class="line">string1 == string2 		是否相等</span><br><span class="line">string1 != string2 		不等</span><br></pre></td></tr></table></figure>
<h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]           假如  条件为真</span><br><span class="line">   then                    那么</span><br><span class="line">      commands             执行commands代码块</span><br><span class="line">fi			  			   结束</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]     </span><br><span class="line">     then           	    条件为真</span><br><span class="line">          commands1     	真  要执行代码块</span><br><span class="line">else                	    条件为假</span><br><span class="line">          commands2     	假   要执行的代码块</span><br><span class="line">fi         		            结束</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if [ condition 1 ]           满足第一个条件</span><br><span class="line">     then                   真</span><br><span class="line">          command1          执行command1代码块</span><br><span class="line">elif [ condition 2 ]         满足第二个条件</span><br><span class="line">     then                   真</span><br><span class="line">          commands2         执行command2代码块</span><br><span class="line">  .......</span><br><span class="line">else                        如果条件都不满足</span><br><span class="line"></span><br><span class="line">          commandsX         执行commandX代码块</span><br><span class="line">fi                          结束判断</span><br></pre></td></tr></table></figure>
<ul>
<li>高级用法</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 条件符号使用双圆括号，可以在条件中植入数学表达式 <span class="keyword">if</span> (())</span></span><br><span class="line">if (( (5+5-5)*5/5 &gt; 10 ))</span><br><span class="line">    then</span><br><span class="line">        echo &quot;yes&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;no&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用双方括号,可以在条件中使用通配符</span></span><br><span class="line">for var in  ab ac rx bx rvv vt</span><br><span class="line">   do</span><br><span class="line">       if [[ &quot;$var&quot; == r* ]]</span><br><span class="line">	  then</span><br><span class="line">		echo &quot;$var&quot;</span><br><span class="line">       fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for variable_name in &#123;list&#125;</span><br><span class="line">     do</span><br><span class="line">          command </span><br><span class="line">          command</span><br><span class="line">          …</span><br><span class="line">     done</span><br><span class="line">或者</span><br><span class="line">for variable in a b c</span><br><span class="line">     do</span><br><span class="line">         command</span><br><span class="line">         command</span><br><span class="line">     done</span><br></pre></td></tr></table></figure>
<ul>
<li>c风格</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for(( expr1;expr2;expr3 ))</span><br><span class="line">	do</span><br><span class="line">		command</span><br><span class="line">		command</span><br><span class="line">		…</span><br><span class="line">	done</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">for (( i=1;i&lt;=5;i++))  </span><br><span class="line">	do</span><br><span class="line">		echo $i</span><br><span class="line">	done</span><br></pre></td></tr></table></figure>
<p><code>break [n]</code>，退出整个循环，包括for、while、until和select语句。其中数值n表示退出的循环层次。</p>
<p><code>continue [n]</code>，退出当前循环进入下一次循环。n表示继续执行向外退出n层的循环。默认n=1，表示继续当前层的下一循环，n=2表示继续上一层的下一循环。</p>
<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while [ 表达式 ]      # 条件为真就进入循环；条件为假就退出循环</span><br><span class="line">	do</span><br><span class="line">		command...</span><br><span class="line">	done</span><br></pre></td></tr></table></figure>
<h4 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">case $var in            定义变量;var代表是变量名</span><br><span class="line">pattern 1)              模式1;用 | 分割多个模式，相当于or</span><br><span class="line">    command1            需要执行的语句</span><br><span class="line">    ;;                  两个分号代表命令结束</span><br><span class="line">pattern 2)</span><br><span class="line">    command2</span><br><span class="line">    ;;</span><br><span class="line">pattern 3)</span><br><span class="line">    command3</span><br><span class="line">    ;;</span><br><span class="line">*)                      default，不满足以上模式，默认执行*)下面的语句</span><br><span class="line">    command4</span><br><span class="line">    ;;</span><br><span class="line">esac							esac表示case语句结束</span><br></pre></td></tr></table></figure>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">语法一:</span><br><span class="line"></span><br><span class="line">函数名 () &#123;</span><br><span class="line">    代码块</span><br><span class="line">    return N</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">语法二：</span><br><span class="line">function 函数名 &#123;</span><br><span class="line">      代码块</span><br><span class="line">      return N</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">函数名    #调用函数 </span><br><span class="line">      </span><br><span class="line">函数中return说明：</span><br><span class="line">1.return可以结束一个函数，类似于循环控制语句break(结束当前循环，执行循环体后面的代码)</span><br><span class="line">2.return默认返回函数中最后一个命令的退出状态，也可以给定参数值，该参数值的范围是0-256之间。</span><br><span class="line">3.如果没有return命令，函数将返回最后一个Shell的退出值。shell的函数一般都不写return。</span><br></pre></td></tr></table></figure>
<h4 id="Shell脚本中的-字符"><a href="#Shell脚本中的-字符" class="headerlink" title="Shell脚本中的$字符"></a>Shell脚本中的<code>$</code>字符</h4><div class="table-container">
<table>
<thead>
<tr>
<th>特殊标志符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$0</code></td>
<td>当前脚本的文件名</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是<code>$1</code>，第二个参数是<code>$2</code></td>
</tr>
<tr>
<td><code>$#</code></td>
<td>传递给脚本或函数的参数个数</td>
</tr>
<tr>
<td><code>$*</code></td>
<td>传递给脚本或函数的所有参数</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>传递给脚本或函数的所有参数</td>
</tr>
<tr>
<td><code>$?</code></td>
<td>上个命令的退出状态</td>
</tr>
<tr>
<td>$$</td>
<td>当前Shell进程ID</td>
</tr>
<tr>
<td><code>$()</code></td>
<td>与 `(反引号) 一样用来命令替换使用</td>
</tr>
<tr>
<td><code>$&#123;&#125;</code></td>
<td>引用变量划分出边界</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line">echo &quot;file name $0&quot;</span><br><span class="line">echo &quot;first param  $1&quot;</span><br><span class="line">echo &quot;pid $$&quot;</span><br><span class="line">echo &quot;total num of param $#&quot;</span><br><span class="line">echo &quot;last status $?&quot;</span><br><span class="line">echo &quot;$@&quot;</span><br><span class="line">echo &quot;$*&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/1.sh hello mayuan # 执行脚本并传入两个参数</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出结果</span></span><br><span class="line">file name ./1.sh</span><br><span class="line">first param  hello</span><br><span class="line">pid 142</span><br><span class="line">total num of param 2</span><br><span class="line">last status 0</span><br><span class="line">hello mayuan</span><br><span class="line">hello mayuan</span><br></pre></td></tr></table></figure>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><p>sed是linux中提供的一个外部命令,它是一个行(流)编辑器，非交互式的对文件内容进行增删改查的操作。</p>
<p>文本编辑器: 编辑对象是文件；行编辑器：编辑对象是文件中的行。前者一次处理一个文本，而后者是一次处理一个文本中的一行。</p>
<p><img src="https://raw.githubusercontent.com/wht6/image/master/img/sed_2022325.png" alt></p>
<p><strong>sed 命令语法：</strong></p>
<p>sed [options] ‘{command}[flags]’ [filename]</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">命令选项</span></span><br><span class="line">-e script 将脚本中指定的命令添加到处理输入时执行的命令中  多条件，一行中要有多个操作</span><br><span class="line">-f script 将文件中指定的命令添加到处理输入时执行的命令中</span><br><span class="line">-n        抑制自动输出</span><br><span class="line">-i        编辑文件内容</span><br><span class="line">-i.bak    修改时同时创建.bak备份文件。</span><br><span class="line">-r        使用扩展的正则表达式</span><br><span class="line">!         取反 （跟在模式条件后与shell有所区别）</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">command</span>   对文件干什么</span></span><br><span class="line">sed 常用内部命令</span><br><span class="line">a   在匹配后面添加</span><br><span class="line">i   在匹配前面添加</span><br><span class="line"></span><br><span class="line">d   删除</span><br><span class="line"></span><br><span class="line">s   查找替换  字符串</span><br><span class="line">c   更改</span><br><span class="line">y   转换   N D P </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p   打印</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">flags</span></span><br><span class="line">数字             表示新文本替换的模式</span><br><span class="line">g：             表示用新文本替换现有文本的全部实例</span><br><span class="line">p：             表示打印原始的内容</span><br><span class="line">w filename:     将替换的结果写入文件</span><br></pre></td></tr></table></figure>
<p>命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;a\append data &quot;haha&quot;&#x27; data1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> 在data1的每行后追加一行新数据内容: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2a\append data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 在第二行后新开一行追加数据: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/a\append data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 找到包含<span class="string">&quot;3 the&quot;</span>的行，在其后新开一行追加内容: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> //开启匹配模式  /要匹配的字符串/ 更常用</span></span><br><span class="line"></span><br><span class="line">sed &#x27;2,4i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 在第二到四行每行前新开一行插入数据: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 找到包含<span class="string">&quot;3 the&quot;</span>的行，在其前新开一行插入内容: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line"></span><br><span class="line">sed &#x27;/3 the/d&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除文件data1中包含字符串<span class="string">&quot;3 the&quot;</span>的行</span></span><br><span class="line"></span><br><span class="line">sed &#x27;2s/dog/cat/&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1中第二行的dog替换为cat</span></span><br><span class="line">sed &#x27;/3 the/s/dog/cat/&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将包含字符串<span class="string">&quot;3 the&quot;</span>的行中的dog替换为cat</span></span><br><span class="line"></span><br><span class="line">sed &#x27;2c\change data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1文件第二行的内容更改为: change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2,4c\change data &quot;haha&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1文件中的第二、三、四行的内容删除，更改为一行：change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/c\change data &quot;data&quot;&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1文件中包含<span class="string">&quot;3 the&quot;</span>的行内容更改为: change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line"></span><br><span class="line">sed &#x27;y/abc/ABC/&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1中的a b c字符转换为对应的 A  B  C字符</span></span><br><span class="line"></span><br><span class="line">sed &#x27;2,4p&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印data1文件第二、三、四行内容</span></span><br></pre></td></tr></table></figure>
<p>标志位</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/dog/cat/2&#x27; data2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 替换一行中的第二处dog为cat</span></span><br><span class="line">sed &#x27;s/dog/cat/g&#x27; data2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将data1文件中的所有dog替换为cat</span></span><br><span class="line"></span><br><span class="line">sed  &#x27;3s/dog/cat/w text&#x27; data2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将修改的内容存入text文件中</span></span><br><span class="line">sed &#x27;w data2.bak&#x27; data2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份data2的数据</span></span><br><span class="line"></span><br><span class="line">sed  &#x27;3s/dog/cat/p&#x27; data2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印文本内容，类似于-p命令选项</span></span><br></pre></td></tr></table></figure>
<p>选项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;2,$p&#x27; data1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印data1文件的第二行到最后一行内容  $是最后的意思</span></span><br><span class="line"></span><br><span class="line">sed -r &#x27;/(^#|#|^$)/d&#x27; nginx.conf </span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有注释和空行</span></span><br><span class="line">sed -n -r &#x27;/^(root)(.*)(bash)$/p&#x27; /etc/password</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印root开头，bash结尾，中间任意的行</span></span><br><span class="line"></span><br><span class="line">sed -e &#x27;s/brown/green/;s/dog/cat/&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将brown替换为green dog替换为cat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在命令行中使用多个命令 用-e</span></span><br><span class="line"></span><br><span class="line">vim abc </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## abc的内容</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> s/brown/green/</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> s/dog/cat/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> s/fox/elephant/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##</span></span></span><br><span class="line">sed -f abc data1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> 从文件读取编辑器命令 用-f ，适用于日常重复执行的场景</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果需要修改文件内容可以直接使用-i命令选项</span></span><br><span class="line">sed -i.bak &#x27;s/brown/green/&#x27; data1</span><br><span class="line"><span class="meta">#</span><span class="bash"> -i是一个不可逆的操作，一旦修改，如果想复原就很困难，几乎不可能，所以建议大家在操作的时候可以备份一下源文件。</span></span><br></pre></td></tr></table></figure>
<p>其他：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 配合管道</span></span><br><span class="line">echo &quot;xxx is yyy&quot; | sed &#x27;s/yyy/zzz/&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 统计行数</span></span><br><span class="line">sed -n &#x27;$=&#x27; data1</span><br></pre></td></tr></table></figure>
<h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><p>awk可以对数据进行筛选和处理。awk是一种可以处理数据、产生格式化报表的语言，功能十分强大。awk 认为文件中的每一行是一条记录 记录与记录的分隔符为换行符,每一列是一个字段 字段与字段的分隔符默认是一个或多个空格或tab制表符。</p>
<p>awk的工作方式是读取数据，将每一行数据视为一条记录（record）每条记录以字段分隔符分成若干字段，然后输出各个字段的值。</p>
<ul>
<li>awk语法</li>
</ul>
<p>awk [options] ‘[BEGIN]{program}[END]’ [FILENAME]</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">常用命令选项</span><br><span class="line">-F fs 指定描绘一行中数据字段的文件分隔符  默认为空格</span><br><span class="line">-f file 指定读取程序的文件名</span><br><span class="line">-v var=value 定义awk程序中使用的变量和默认值</span><br><span class="line"></span><br><span class="line">注意：awk 程序由左大括号和右大括号定义。 程序命令必须放置在两个大括号之间。由于awk命令行假定程序是单文本字符串，所以必须将程序包括在单引号内。</span><br><span class="line">1）程序必须放在大括号内</span><br><span class="line">2）程序必须要用单引号引起来</span><br><span class="line"></span><br><span class="line">awk程序运行优先级是:</span><br><span class="line">    1)BEGIN: 在开始处理数据流之前执行，可选项</span><br><span class="line">    2)program: 如何处理数据流，必选项</span><br><span class="line">    3)END: 处理完数据流后执行，可选项</span><br></pre></td></tr></table></figure>
<h5 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h5><ul>
<li>awk对字段(列)的提取</li>
</ul>
<blockquote>
<p>字段提取:提取一个文本中的一列数据并打印输出</p>
<p>字段相关内置变量</p>
<p>$0 表示整行文本</p>
<p>$1 表示文本行中的第一个数据字段</p>
<p>$2 表示文本行中的第二个数据字段</p>
<p>$N 表示文本行中的第N个数据字段</p>
<p>$NF 表示文本行中的最后一个数据字段（NF是总字段数，即列数）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $0&#125;&#x27; test </span><br><span class="line"><span class="meta">#</span><span class="bash"> 读入<span class="built_in">test</span>每行数据并把每行数据打印出来</span></span><br><span class="line">awk &#x27;&#123;print $6&#125;&#x27; test</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印<span class="built_in">test</span>第六个字段（列）</span></span><br><span class="line">awk &#x27;&#123;print $NF&#125;&#x27; test</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印<span class="built_in">test</span>最后一列</span></span><br></pre></td></tr></table></figure>
<ul>
<li>awk对记录(行)的提取</li>
</ul>
<blockquote>
<p>记录提取：提取一个文本中的一行并打印输出</p>
<p>记录的提取方法有两种：a、通过行号 b、通过正则匹配</p>
<p>NR: 指定行号 number row</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;NR==3&#123;print $0&#125;&#x27; test </span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取<span class="built_in">test</span>第三行数据 指定行号为3</span></span><br><span class="line">awk &#x27;$1==&quot;3&quot;&#123;print $0&#125;&#x27; test</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定行的第一个字段精确匹配字符串为3</span></span><br><span class="line"></span><br><span class="line">df -hT|awk &#x27;/\/$/&#123;print$(NF-1)&#125;&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 两个/之间是正则表达式，这里是找到以/结尾的行，并打印倒数第二列</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 整条命令的作用是查看根目录的磁盘使用率</span></span><br></pre></td></tr></table></figure>
<ul>
<li>选项</li>
</ul>
<p><code>-F</code>: 指定字段与字段的分隔符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print &quot;Account: &quot; $1,&quot;UID: &quot; $3,&quot;DESC: &quot; $5&#125;&#x27; /etc/passwd #可以加入字符串</span><br></pre></td></tr></table></figure>
<ul>
<li>awk的优先级</li>
</ul>
<p>关于awk程序的执行优先级，BEGIN是优先级最高的代码块，是在执行PROGRAM之前执行的，不需要提供数据源，因为不涉及到任何数据的处理，也不依赖与PROGRAM代码块；PROGRAM是对数据流干什么，是必选代码块，也是默认代码块。所以在执行时必须提供数据源；END是处理完数据流后的操作，如果需要执行END代码块，就必须需要PROGRAM的支持，单个无法执行。</p>
<blockquote>
<p>BEGIN：处理数据源之前干什么 不需要数据源就可以执行</p>
<p>PROGRAM： 对数据源干什么 【默认必须有】 需要数据源</p>
<p>END：处理完数据源后干什么 需要program 需要数据源</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print &quot;hello&quot;&#125;&#123;print $0&#125;END&#123;print &quot;bye&quot;&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不需要数据源，可以直接执行</span></span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;hello world&quot;&#125;&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 没有提供数据流，所以无法执行成功</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> awk <span class="string">&#x27;&#123;print &quot;hello world&quot;&#125;&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> awk <span class="string">&#x27;END&#123;print &quot;hello world&quot;&#125;&#x27;</span></span></span><br></pre></td></tr></table></figure>
<h5 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h5><p>awk还可以定义变量，定义数组，运算和流程控制。</p>
<ul>
<li>计算内存使用率</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -2 /proc/meminfo | awk &#x27;NR==1&#123;t=$2&#125;NR==2&#123;f=$2;print (t-f)*100/t &quot;%&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>
<ul>
<li>变量和数组</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;name=&quot;xxx&quot;;print name&#125;&#x27;</span><br><span class="line"></span><br><span class="line">awk &#x27;BEGIN&#123;array[0]=100;array[1]=200;print array[0],array[1]&#125;&#x27;</span><br></pre></td></tr></table></figure>
<ul>
<li>运算</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print &quot;a&quot; &gt;= &quot;b&quot; &#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;print 100/3 &#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;print 100&gt;=2 &amp;&amp; 100&gt;=3 &#125;&#x27;</span><br><span class="line">awk -v &#x27;count=0&#x27; &#x27;BEGIN&#123;count++;print count&#125;&#x27;</span><br></pre></td></tr></table></figure>
<ul>
<li>匹配</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;$1=&quot;root&quot; &#123;print $0&#125;&#x27; /etc/passwd # 精确匹配</span><br><span class="line">awk -F: &#x27;$1 ~ &quot;^ro&quot; &#123;print $0&#125;&#x27; /etc/passwd # 模糊匹配</span><br></pre></td></tr></table></figure>
<ul>
<li>awk环境变量</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">变量</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">FIELDWIDTHS</td>
<td style="text-align:left">以空格分隔的数字列表，用空格定义每个数据字段的精确宽度</td>
</tr>
<tr>
<td style="text-align:left">FS</td>
<td style="text-align:left">输入字段分隔符号，数据源的字段分隔符，等价于-F</td>
</tr>
<tr>
<td style="text-align:left">OFS</td>
<td style="text-align:left">输出字段分隔符号</td>
</tr>
<tr>
<td style="text-align:left">RS</td>
<td style="text-align:left">输入记录分隔符</td>
</tr>
<tr>
<td style="text-align:left">ORS</td>
<td style="text-align:left">输出记录分隔符号</td>
</tr>
<tr>
<td style="text-align:left">NF</td>
<td style="text-align:left">一条记录（行）的字段的数目，即列数</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> FIELDWIDTHS:重定义列宽并打印，注意不可以使用<span class="variable">$0</span>打印所有，因为<span class="variable">$0</span>是打印本行全内容，不会打印你定义的字段</span></span><br><span class="line">awk &#x27;BEGIN&#123;FIELDWIDTHS=&quot;5 2 8&quot;&#125;NR==1&#123;print $1,$2,$3&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> FS:指定数据源中字段分隔符，类似命令选项-F</span></span><br><span class="line">awk &#x27;BEGIN&#123;FS=&quot;:&quot;&#125;NR==1&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> OFS:指定输出到屏幕后字段的分隔符</span></span><br><span class="line">awk &#x27;BEGIN&#123;FS=&quot;:&quot;;OFS=&quot;-&quot;&#125;NR==1&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> RS:指定记录(行)的分隔符</span></span><br><span class="line">awk &#x27;BEGIN&#123;RS=&quot;&quot;&#125;&#123;print $1,$2,$3&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ORS:输出到屏幕后记录的分隔符，默认为回车</span></span><br><span class="line">awk &#x27;BEGIN&#123;RS=&quot;&quot;;ORS=&quot;*&quot;&#125;&#123;print $1,$2,$3&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<ul>
<li>流程控制</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;if($1&gt;5)print $0&#125;&#x27; num</span><br><span class="line"><span class="meta">#</span><span class="bash"> 单<span class="keyword">if</span>语句 打印<span class="variable">$1</span>大于5的行</span></span><br><span class="line">awk &#x27;&#123;if($1&gt;5)print $1/2;else print $1*2&#125;&#x27; num</span><br><span class="line"><span class="meta">#</span><span class="bash"> if...else语句 假如<span class="variable">$1</span>大于5则除以2输出，否则乘以2输出</span></span><br><span class="line"></span><br><span class="line">awk &#x27;&#123;sum=0;for (i=1;i&lt;4;i++)&#123;sum+=$i&#125;print sum&#125;&#x27; num2</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span>循环 将一行中的数据都加起来  <span class="variable">$1</span>+<span class="variable">$2</span>+<span class="variable">$3</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果看的不明白可以看下面格式</span></span><br><span class="line">awk &#x27;&#123;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sum=0</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="keyword">for</span> (i=1;i&lt;4;i++) &#123;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">     sum+=<span class="variable">$i</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &#125;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">print</span> sum</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &#125;<span class="string">&#x27; num2</span></span></span><br><span class="line"></span><br><span class="line">awk &#x27;&#123;sum=0;i=1;while(i&lt;4)&#123;sum+=$i;i++&#125;print sum&#125;&#x27; num2</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">while</span>循环 将文件中的每行的数值累加</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">do</span> <span class="keyword">while</span>和<span class="built_in">break</span>也可以使用</span></span><br></pre></td></tr></table></figure>
<ul>
<li>小技巧</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 打印<span class="built_in">test</span>文本中的行数</span></span><br><span class="line">awk &#x27;END&#123;print NR&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印<span class="built_in">test</span>文本最后一行的内容</span></span><br><span class="line">awk &#x27;END&#123;print $0&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印<span class="built_in">test</span>文本中的列数</span></span><br><span class="line">awk &#x27;END&#123;print NF&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><p>wc命令用于计算字数。</p>
<ul>
<li>-c或—bytes或—chars 只显示Bytes数。</li>
<li>-l或—lines 显示行数。</li>
<li>-w或—words 只显示字数。</li>
</ul>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>sort命令用于将文本文件内容加以排序。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sort filename # sort不加任何参数默认是对文件的行进行排序，以ASCII 码的次序排列，，并将结果输出到标准输出。</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat testfile      <span class="comment"># testfile文件原有排序</span></span>  </span><br><span class="line">test 30  </span><br><span class="line">Hello 95  </span><br><span class="line">Linux 85</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sort testfile     <span class="comment"># 重排结果</span></span>  </span><br><span class="line">Hello 95  </span><br><span class="line">Linux 85  </span><br><span class="line">test 30</span><br><span class="line"></span><br><span class="line">sort -n qc.log # 按数字排序：默认为升序。</span><br><span class="line">sort -r qc.log # 按倒序排序。</span><br><span class="line">sort -nr qc.log # 按数字倒序排序。</span><br><span class="line"></span><br><span class="line">-t # 指定列的分隔符</span><br><span class="line">-k # 按指定的列排序</span><br><span class="line">sort -t&quot; &quot; -k2 qc3.log # 以空格划分列，并按照第二列排序</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><p>uniq 命令用于检查及删除文本文件中重复出现的行列，一般与 sort 命令结合使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uniq testfile # 删除重复行(重复的行只保留一行)</span><br><span class="line">uniq -c testfile # 检查文件并删除文件中重复出现的行，并在行首显示该行重复出现的次数</span><br></pre></td></tr></table></figure>
<h4 id="head"><a href="#head" class="headerlink" title="head"></a>head</h4><p>head 用来查看文件的开头部分的内容，默认head命令打印其相应文件的开头10行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">head -n 5 test.log # 显示 test.log 文件的开头 5 行</span><br><span class="line">head -n -10 test.log # 输出文件除了最后 10 行的全部内容</span><br><span class="line">head -c 50 test.log # 显示test.log 文件前 50 个字节</span><br><span class="line">head -c -50 test.log # 文件的除了最后 50 个字节以外的内容</span><br></pre></td></tr></table></figure>
<h4 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h4><p>tail用于显示指定文件末尾内容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -n 3 log1 # 显示log1文件最后3行内容</span><br><span class="line">tail -n +3 log1 # 从第3行开始显示log1文件内容</span><br></pre></td></tr></table></figure>
<p>tailf常用来追踪日志。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tailf logfile # 动态跟踪日志文件logfile，最初的时候打印文件的最后10行内容。</span><br></pre></td></tr></table></figure>
<h3 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h3><h4 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h4><p>lsof 是 List Open File 的缩写, 它主要用来获取被进程打开文件的信息，我们都知道，在Linux中，一切皆文件，lsof命令可以查看所有已经打开了的文件，比如: 普通文件，目录，特殊的块文件，管道，socket套接字，设备，Unix域套接字等等，同时，它还可以结合 grep 以及 ps 命令进行更多的高级搜索。</p>
<ul>
<li>不带任何参数执行 <code>lsof</code> 命令会输出当前所有活跃进程打开的所有文件</li>
<li><code>-u</code>，列出指定用户已经打开的文件</li>
<li><p><code>-i</code>，列出所有打开了的网络文件</p>
<ul>
<li><code>-i 4</code>，列出所有已经打开了的 ipv4 网络文件</li>
<li><code>-i 6</code>，列出所有已经打开了的 ipv6 网络文件</li>
<li><code>-i:端口号</code>，获得所有在指定端口号上打开的文件</li>
<li><code>-i TCP/UDP</code> 列出使用了TCP 或 UDP 协议的文件</li>
</ul>
</li>
<li><p><code>-p</code>，列出指定进程ID打开的文件</p>
</li>
</ul>
<h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><p>curl 是一个工具，利用URL规则在命令行下工作的文件传输工具，可以说是一款很强大的http命令行工具。它支持文件的上传和下载，是综合传输工具，但按传统，习惯称url为下载工具。可支持的协议有（DICT、FILE、FTP、FTPS、GOPHER、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、SFTP、SMTP、SMTPS、TELNET和TFTP）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl http://www.linux.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> 直接下载html页面，内容会直接显示在终端</span></span><br><span class="line">curl http://www.linux.com &gt;&gt; linux.html</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将内容重定向到文件中</span></span><br><span class="line">curl -o linux.html http://www.linux.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者使用-o 输出到文件中</span></span><br><span class="line">curl -O http://www.linux.com/hello.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> -O 要注意这里后面的url要具体到某个文件，不然抓不下来</span></span><br><span class="line"></span><br><span class="line">-s # 静默模式，不输出错误信息和进度信息</span><br><span class="line">-S # 当与 -s 一起使用时，如果curl失败，curl将显示一条错误消息</span><br><span class="line">-i # 在输出的内容中包含HTTP 头信息</span><br><span class="line">-I # (HTTP/FTP/FILE)只获取HTTP头文件;在FTP或FILE 文件上使用时，curl只显示文件大小和最后修改时间</span><br><span class="line"><span class="meta">-#</span><span class="bash"> <span class="comment"># 将curl进度显示为一个简单的进度条；而不是标准的、具有更多信息的进度表</span></span></span><br></pre></td></tr></table></figure>
<p>curl也可以发送Post请求，上传表单。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -d参数用于发送 POST 请求的数据体</span></span><br><span class="line">curl -d&#x27;login=emma＆password=123&#x27;-X POST https://google.com/login</span><br><span class="line"><span class="meta">#</span><span class="bash"> 等价于</span></span><br><span class="line">curl -d &#x27;login=emma&#x27; -d &#x27;password=123&#x27; -X POST  https://google.com/login</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用-d参数以后，会自动将请求转为 POST 方法，因此可以省略-X POST</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d参数也可以从本地文件读取数据</span></span><br><span class="line">curl -d &#x27;@data.txt&#x27; https://google.com/login</span><br></pre></td></tr></table></figure>
<h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><p>netstat命令是一个监控TCP/IP网络的非常有用的工具，它可以显示路由表、实际的网络连接以及每一个网络接口设备的状态信息。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Proto</td>
<td>协议</td>
</tr>
<tr>
<td>Recv-Q</td>
<td>接收队列（本地缓冲）</td>
</tr>
<tr>
<td>Send-Q</td>
<td>发送队列（本地缓冲）</td>
</tr>
<tr>
<td>Local Address</td>
<td>本地IP<code>:</code>本地端口</td>
</tr>
<tr>
<td>Foreign Address</td>
<td>远程IP<code>:</code>远程端口</td>
</tr>
<tr>
<td>State</td>
<td>链接状态</td>
</tr>
<tr>
<td>PID</td>
<td>进程PID号</td>
</tr>
<tr>
<td>Program name</td>
<td>程序名字</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>链接状态</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>LISTEN</td>
<td>侦听来自远程TCP端口的连接请求</td>
</tr>
<tr>
<td>SYN_SENT</td>
<td>在发送SYN连接请求后等待确认</td>
</tr>
<tr>
<td>SYN_RECV</td>
<td>已收到SYN连接请求，发送SYNACK后等待确认</td>
</tr>
<tr>
<td>ESTABLISHED</td>
<td>连接建立</td>
</tr>
<tr>
<td>FIN_WAIT1</td>
<td>主动关闭(active close)端发出FIN关闭请求</td>
</tr>
<tr>
<td>CLOSE_WAIT</td>
<td>被动关闭(passive close)端TCP接到FIN后，就发出FINACK以回应FIN请求</td>
</tr>
<tr>
<td>FIN_WAIT2</td>
<td>主动关闭端接到FINACK后，就进入了 FIN-WAIT-2</td>
</tr>
<tr>
<td>LAST_ACK</td>
<td>被动关闭端一段时间后，接收到文件结束符的应用程序将调用CLOSE关闭连接，发出FIN关闭请求</td>
</tr>
<tr>
<td>TIME_WAIT</td>
<td>在主动关闭端接收到FIN后，发送FINACK包，并进入TIME-WAIT状态</td>
</tr>
<tr>
<td>CLOSING</td>
<td>比较少见。Both sockets are shut down but we still don’t have all our data sent.</td>
</tr>
<tr>
<td>CLOSED</td>
<td>被动关闭端在接受到ACK包后，就进入了closed的状态。TIME-WAIT状态结束，在主动关闭端进入closed状态</td>
</tr>
<tr>
<td>UNKNOWN</td>
<td>未知的Socket状态</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>列出所有端口情况</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -a      # 列出所有端口详情</span><br><span class="line">netstat -at     # 列出所有TCP端口</span><br><span class="line">netstat -au     # 列出所有UDP端口</span><br><span class="line">netstat -an     # 数字代替名称</span><br></pre></td></tr></table></figure>
<ol>
<li>列出所有处于监听状态的 Sockets</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -l   # 只显示监听端口</span><br><span class="line">netstat -lt  # 显示监听TCP端口</span><br><span class="line">netstat -lu  # 显示监听UDP端口</span><br><span class="line">netstat -lx  # 显示监听UNIX端口</span><br></pre></td></tr></table></figure>
<ol>
<li>显示每个协议的统计信息</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -s     # 显示所有端口的统计信息</span><br><span class="line">netstat -st    # 显示所有TCP的统计信息</span><br><span class="line">netstat -su    # 显示所有UDP的统计信息</span><br></pre></td></tr></table></figure>
<ol>
<li>显示 PID 和进程名称</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -p</span><br></pre></td></tr></table></figure>
<ol>
<li>显示核心路由信息</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -r</span><br><span class="line">netstat -rn   # 显示数字格式，不查询主机名称</span><br></pre></td></tr></table></figure>
<ol>
<li>查看端口和服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -antp | grep ssh</span><br><span class="line">netstat -antp | grep 22</span><br></pre></td></tr></table></figure>
<h4 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h4><p>scp是基于ssh的远程文件复制工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 本地复制到远程</span></span><br><span class="line">scp /home/space/music/1.mp3 root@192.168.1.132:/home/root/others/music </span><br><span class="line">scp /home/space/music/1.mp3 root@192.168.1.132:/home/root/others/music/001.mp3</span><br><span class="line">scp -r /home/space/music/ root@192.168.1.132:/home/root/others/ </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从远程复制到本地</span></span><br><span class="line">scp root@192.168.1.132:/home/root/others/music /home/space/music/1.mp3 </span><br><span class="line">scp -r root@192.168.1.132:/home/root/others/ /home/space/music/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定端口</span></span><br><span class="line">scp -P 4588 root@192.168.1.132:/usr/local/sin.sh /home/administrator</span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="库函数"><a href="#库函数" class="headerlink" title="库函数"></a>库函数</h4><p>库函数就是<code>/etc/rc.d/init.d/functions</code>文件中定义的系统函数（/etc/init.d/是/etc/rc.d/init.d的软链接）。</p>
<ul>
<li><p>显示函数</p>
<blockquote>
<ul>
<li>success：显示绿色的<code>OK</code>，表示成功</li>
<li>failure：显示红色的<code>FAILED</code>，表示失败</li>
<li>passed：显示黄色的<code>PASSED</code>，表示pass该任务</li>
<li>warning：显示黄色的<code>warning</code>，表示警告</li>
<li>confirm：提示<code>(Y)es/(N)o/(C)ontinue? [Y]</code>并判断、传递输入的值</li>
<li>is_true：<code>$1</code>的布尔值代表为真时，返回状态码<code>0</code>，否则返回<code>1</code>；包括<code>t/y/yes/true</code>，不区分大小写</li>
<li>is_false：<code>$1</code>的布尔值代表为假时，返回状态码<code>0</code>，否则返回<code>1</code>；包括<code>f/n/no/false</code>，不区分大小写</li>
<li>action：根据进程退出状态码自行判断是执行<code>success</code>还是<code>failure</code></li>
</ul>
</blockquote>
</li>
<li><p>进程函数</p>
<blockquote>
<ul>
<li>checkpid：检查<code>/proc</code>下是否有给定<code>pid</code>对应的目录，给定多个<code>pid</code>时，只要存在一个目录都返回状态码<code>0</code></li>
<li>__pids_var_run：检查<code>pid</code>是否存在，并保存到变量<code>pid</code>中，同时返回几种进程状态码</li>
<li>__pids_pidof：获取进程<code>pid</code></li>
<li>pidfileofproc：获取进程<code>pid</code>，但只能获取<code>/var/run</code>下的<code>pid</code>文件中的值</li>
<li>pidofproc：获取进程<code>pid</code>，可获取任意给定<code>pidfile</code>或默认<code>/var/run</code>下<code>pidfile</code>中的值</li>
<li>status：检查给定进程的运行状态</li>
<li>daemon：启动一个服务程序，启动前还检查进程是否已在运行</li>
<li>killproc：杀掉给定的服务进程</li>
</ul>
</blockquote>
</li>
</ul>
<p>在脚本中使用引入库函数的方式是在脚本中加入<code>. /etc/rc.d/init.d/functions</code>或<code>. /etc/init.d/functions</code></p>
<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><p>正则表达式是一种文本匹配模式，提供一些特殊字符生成匹配字符串的公式来从文本中匹配出想要的数据。</p>
<p>Linux中支持正则表达式的工具：locate |find| vim| grep| sed |awk。</p>
<p>定位符使用技巧：同时锚定开头和结尾，做精确匹配；单一锚定开头或结尾或者不锚定的，做模糊匹配。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">定位符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:left">锚定开头 ^a 以a开头 默认锚定一个字符</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:left">锚定结尾 a$ 以a结尾 默认锚定一个字符</td>
</tr>
</tbody>
</table>
</div>
<p><em>grep -e或egrep，表示支持正则表达式（默认不支持）。</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ egrep <span class="string">&quot;^ac$&quot;</span> file   <span class="comment"># 匹配a开头且c结尾的串 精确匹配</span></span><br><span class="line">$ egrep <span class="string">&quot;^a&quot;</span> file   <span class="comment"># 匹配a开头的串 模糊匹配</span></span><br><span class="line">$ egrep <span class="string">&quot;c$&quot;</span> file   <span class="comment"># 匹配c结尾的串 模糊匹配</span></span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">匹配符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:left">匹配除回车以外的任意<strong>一个</strong>字符</td>
</tr>
<tr>
<td style="text-align:center">( )</td>
<td style="text-align:left">字符串分组</td>
</tr>
<tr>
<td style="text-align:center">[ ]</td>
<td style="text-align:left">定义字符类，匹配括号中的<strong>一个</strong>字符</td>
</tr>
<tr>
<td style="text-align:center">[ ^ ]</td>
<td style="text-align:left">表示否定括号中出现字符类中的字符,<strong>取反</strong>。</td>
</tr>
<tr>
<td style="text-align:center">\</td>
<td style="text-align:left">转义字符</td>
</tr>
<tr>
<td style="text-align:center">\</td>
<td style="text-align:left"></td>
<td>或</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^a[a-z0-9]c$&quot;</span> file  <span class="comment"># 以a开头c结尾  中间是a-z,0-9  长度为三个字节的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^a[^a-z0-9]c$&quot;</span> file <span class="comment"># 以a开头c结尾  中间不包含a-z,0-9  长度为三个字节的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^a.(b|c)$&quot;</span> file     <span class="comment"># 以a开头b或c结尾  中间是任意  长度为三个字节的字符串</span></span></span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">限定符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:left">某个字符之后加星号表示该字符不出现或出现多次 a<em> (ab)</em></td>
</tr>
<tr>
<td style="text-align:center">？</td>
<td style="text-align:left">与星号相似，但略有变化，表示该字符出现一次或不出现</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:left">与星号相似，表示其前面字符出现一次或多次，但必须出现一次</td>
</tr>
<tr>
<td style="text-align:center">{n,m}</td>
<td style="text-align:left">某个字符之后出现，表示该字符最少n次，最多m次</td>
</tr>
<tr>
<td style="text-align:center">{m}</td>
<td style="text-align:left">正好出现了m次</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^ab*c$&quot;</span> file  <span class="comment"># 以a开头 c结尾 中间是有b或者没有b 长度不限的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^ab?c$&quot;</span> file  <span class="comment"># 以a开头 c结尾 中间只出现一次b或者没有b的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^ab+c$&quot;</span> file  <span class="comment"># 以a开头 c结尾 中间是有b且至少出现一次 长度不限的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^ab&#123;2,4&#125;c$&quot;</span> file <span class="comment"># 以a开头 c结尾 中间是有b且至少出现两次最多出现四次 长度不限的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^ab&#123;3&#125;c$&quot;</span> file   <span class="comment"># 以a开头 c结尾 中间是有b且正好出现三次的字符串</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>posix字符</li>
</ul>
<p><strong>posix字符一次只匹配一个范围中的一个字节</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">POSIX字符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">[:alnum:]</td>
<td style="text-align:left">匹配任意字母字符0-9 a-z A-Z</td>
</tr>
<tr>
<td style="text-align:center">[:alpha:]</td>
<td style="text-align:left">匹配任意字母，大写或小写</td>
</tr>
<tr>
<td style="text-align:center">[:digit:]</td>
<td style="text-align:left">数字 0-9</td>
</tr>
<tr>
<td style="text-align:center">[:graph:]</td>
<td style="text-align:left">非空字符( 非空格控制字符)</td>
</tr>
<tr>
<td style="text-align:center">[:lower:]</td>
<td style="text-align:left">小写字符a-z</td>
</tr>
<tr>
<td style="text-align:center">[:upper:]</td>
<td style="text-align:left">大写字符A-Z</td>
</tr>
<tr>
<td style="text-align:center">[:cntrl:]</td>
<td style="text-align:left">控制字符</td>
</tr>
<tr>
<td style="text-align:center">[:print:]</td>
<td style="text-align:left">非空字符( 包括空格)</td>
</tr>
<tr>
<td style="text-align:center">[:punct:]</td>
<td style="text-align:left">标点符号</td>
</tr>
<tr>
<td style="text-align:center">[:blank:]</td>
<td style="text-align:left">空格和TAB字符</td>
</tr>
<tr>
<td style="text-align:center">[:xdigit:]</td>
<td style="text-align:left">16 进制数字</td>
</tr>
<tr>
<td style="text-align:center">[:space:]</td>
<td style="text-align:left">所有空白字符( 新行、空格、制表符)</td>
</tr>
</tbody>
</table>
</div>
<p>注意<code>[[ ]]</code>双中括号的意思:  第一个中括号是匹配符<code>[]</code>匹配中括号中的任意一个字符，第二个<code>[]</code>是格式 如<code>[:digit:]</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^a[[:alnum:]]c$&quot;</span> file <span class="comment"># 以a开头c结尾  中间a-zA-Z0-9任意字符  长度为三个字节的字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> egrep <span class="string">&quot;^a[[:blank:]]c$&quot;</span> file <span class="comment"># 以a开头c结尾  中间是空格或者TAB符字符  长度为三个字节的字符串</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>案例：ip匹配</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep &#x27;(^([1-9]|1[0-9]|1[1-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)(([0-9]|1[0-9]|1[1-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)&#123;2&#125;([1-9]|1[0-9]|1[1-9]&#123;2&#125;|2[0-5][0-9]|25[0-4])$&#x27; -- color ip.txt</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://www.jianshu.com/p/3e1eaaa3fee8">shell中的括号</a></p>
</div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://wht6.github.io/posts/a2bb.html",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://wht6.github.io/posts/a2bb.html";
            const title         = "「Shell脚本复习」";
            const excerpt       = `基础复习代码规范
脚本第一行

123456#!/usr/bin/env bash # 通过/usr/bin/env运行程序，用户不需要去寻找程序在系统中的位置,，只要程序在你的$PATH中；#!/usr/bin/bash# 指定程序...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/Shell/" rel="tag">Shell</a>
                </div>
                <div class="pull-date">
                    <time datetime="2022-08-09T04:47:35.188Z" itemprop="dateModified">最后编辑：2022-08-09</time>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" LVS+Keepalived架构理解" href="/posts/8db7.html">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" Shell编程实践" href="/posts/1cf9.html">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center">学习技术，而不止于技术</p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                83
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                7
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                47
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">21</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/Ansible/" style="font-size: 0.64em;">Ansible</a> <a href="/tags/DNS/" style="font-size: 0.6em;">DNS</a> <a href="/tags/DevOps/" style="font-size: 0.6em;">DevOps</a> <a href="/tags/Docker/" style="font-size: 0.72em;">Docker</a> <a href="/tags/GitLab/" style="font-size: 0.6em;">GitLab</a> <a href="/tags/Go/" style="font-size: 0.6em;">Go</a> <a href="/tags/Golang/" style="font-size: 0.6em;">Golang</a> <a href="/tags/Go%E8%AF%AD%E8%A8%80/" style="font-size: 0.8em;">Go语言</a> <a href="/tags/InnoDB/" style="font-size: 0.6em;">InnoDB</a> <a href="/tags/Kubernetes/" style="font-size: 0.68em;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 0.6em;">Linux</a> <a href="/tags/MySQL/" style="font-size: 0.76em;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 0.6em;">Nginx</a> <a href="/tags/Python/" style="font-size: 0.72em;">Python</a> <a href="/tags/Python%E8%AF%AD%E8%A8%80/" style="font-size: 0.68em;">Python语言</a> <a href="/tags/SNMP/" style="font-size: 0.6em;">SNMP</a> <a href="/tags/Shell/" style="font-size: 0.68em;">Shell</a> <a href="/tags/Zabbix/" style="font-size: 0.64em;">Zabbix</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/posts/baa4.html"><i class="fa  fa-book"></i> Kubernetes环境部署</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/c1d.html"><i class="fa  fa-book"></i> 数据处理之Awk工具</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/79b6.html"><i class="fa  fa-book"></i> 数据处理之Sed工具</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/9d01.html"><i class="fa  fa-book"></i> e2ec代码浅析</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/638a.html"><i class="fa  fa-book"></i> 源码学习net/http</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- New links -->
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2023 WHT 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by 王贺天.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>


    <script async src="/js/candy.min.js"></script>




    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/ Relative)","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":100,"height":180},"mobile":{"show":false},"react":{"opacityDefault":0.7}});</script></body>
</html>